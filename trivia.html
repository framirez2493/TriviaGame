<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">

<style>
    div {
  margin-bottom: 20px;
  text-align: center;
}
.correct, .incorrect {
  text-transform: capitalize;
}
</style>
<body>

  
        <button id="start_button">start game</button>
     

                <div id="timer"></div>
                <div id="question_div"></div>
                <div id="choices_div"></div>
                <div class="correct"></div>
                <div class="incorrect"></div>
     

       

        
    
</body>
<script>
    
    $.fn.trivia = function() {
 //setting a variable in the global scope to reference to multiple elements with this chaning value but nebver l

    var l = this;
   
    l.userPick = false;
    //object
    l.answers = {
        correct: 0,
        incorrect: 0
    };
    l.images = false;
    l.count = 5;
    l.current = 0;
    console.log(l.current);
    //object with
    l.questions = [{
        question: "how many stars are in the U.S flag",
        choices: ["30", "20", "50", "10"],
        images: ["../images/Rajah.gif"],
        correct: 2
    }, {
        question: " whats the speed of light aprox?",
        choices: ["10 kmph", "100000 kmph", "only god knows", "350000 kmps"],
        correct: 3

    }, {
        question: "In the Lion King, where does Mufasa and his family live?",
        choices: ["Rocky Mountain", "Forest", "Desert", "Pride Rock"],
        correct: 3

    }, {
        question: "In Beauty and the Beast, how many eggs does Gaston eat for    breakfast?",
        choices: ["2 Dozen", "5 Dozen", "5000", "0"],
        correct: 1

    }, {
        question: "In Alice in Wonderland, what is the name of Alice’s kitten?",
        choices: ["Dinah", "Sammie", "Kat", "Luna"],
        correct: 0

    }, {
        question: "After being on earth, where did Hercules first meet his   father Zeus?",
        choices: ["Mount Olympus", "Greece", "In the Temple of Zeus", "Elysian   Fields"],
        correct: 2

    }, {
        question: "During the ballroom scene of Beauty & the Beast, what color is Belle’s Gown?",
        choices: ["Yellow", "Blue", "Gold", "White"],
        correct: 2

    }, {
        question: "In Bambi, what word does the owl use to describe falling in love?",
        choices: ["Whimsical", "Miserable", "Joyful", "Twitterpatted"],
        correct: 3
    }];
    l.ask = function() {
        //if object 1 and 2 show timer starting at 60 show question
        if (l.questions[l.current]) {
            console.log("this  is" + l.questions[l.current]);
            $("#timer").html("Time remaining: " + "00:" + l.count + " secs");
            $("#question_div").html(l.questions[l.current].question);
            var choicesArr = l.questions[l.current].choices;
            var buttonsArr = [];
            console.log("what is this" + choicesArr);
///for each choise in current question show choices in buttoms
           for (var i = 0; i < choicesArr.length; i++) {
                var button = $('<button>');
               button.text(choicesArr[i]);
               button.attr('data-id', i);
            $('#choices_div').append(button);
           }
          // set the speed of your timer
            window.triviaCounter = setInterval(l.timer, 1000);
            //if not answered then unsawered
        } else {
            $('body').append($('<div />', {
                text: 'Unanswered: ' + (
                    l.questions.length - (l.answers.correct + l.answers.incorrect)),
                class: 'result'
            }));
            $('#start_button').text('Restart').appendTo('body').show();
        }
    };

//if get to 0 time out next question
    l.timer = function() {
        l.count--;
        if (l.count <= 0) {
            setTimeout(function() {
             l.nextQ();
            });

        } else {
            $("#timer").html("Time remaining: " + "00:" + l.count + " secs");
        }
    };

    l.nextQ = function() {
        //moves cquestion on index 1 by one
        l.current++;
        clearInterval(window.triviaCounter);
        l.count = 5;
        $('#timer').html("");
        setTimeout(function() {
            l.cleanUp();
            l.ask();
        }, 1000)
    };
    l.cleanUp = function() {
        $('div[id]').each(function(item) {
            $(this).html('');
        });
        console.log(l.cleanUp);
        //log either correct or incorrect into
        $('.correct').html('Correct answers: keep it up ' + l.answers.correct);
        $('.incorrect').html('Incorrect answers: ' + l.answers.incorrect);
    };
    l.answer = function(correct) {
        var string = correct ? 'correct' : 'incorrect';
        l.answers[string]++;
        $('.' + string).html(string + ' answers: ' + l.answers[string]);
    };
    return l;
};



var Trivia;

$("#start_button").click(function() {
    $(this).hide();
    $('.result').remove();
    $('div').html('');
    Trivia = new $(window).trivia();
    Trivia.ask();
});

$('#choices_div').on('click', 'button', function(e) {
    var userPick = $(this).data("id"),
        l = Trivia || $(window).trivia(),
        index = l.questions[l.current].correct,
        correct = l.questions[l.current].choices[index];

    if (userPick !== index) {
        $('#choices_div').text("Wrong Answer! The correct answer was: " + correct);
        l.answer(false);
    } else {
        $('#choices_div').text("Correct!!! The correct answer was: " + correct);
        l.answer(true);
    }
    l.nextQ();
});





</script>
</html>